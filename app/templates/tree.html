<!DOCTYPE html>
<html>
  <head>
    <title>Function Segment Tree Viewer</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css"
      rel="stylesheet"
    />
    <link href="/code/static/css/tree.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  </head>
  <body>
    <header>
      <div class="repo-info" data-repo-hash="{{ repo_hash }}">
        <div class="repo-title">{{ repo_name }}</div>
        <div class="repo-url">{{ repo_url }}</div>
      </div>
      <div class="header-nav">
        <a href="/code/">Home</a>
        <a href="/code/tree/{{ repo_hash }}">AST Tree</a>
      </div>
    </header>

    <div class="container">
      <div class="breadcrumb">
        <a href="/code/">Home</a> &gt;
        <a href="/code/tree/{{ repo_hash }}">{{ repo_name }}</a> &gt;
        <span>Function Tree</span>
      </div>

      <div class="tree-container">
        <div class="file-tree-nav" id="file-tree">
          <h3>File Structure</h3>
          <div id="loading-file-tree" class="loading"></div>
        </div>

        <div class="custom-function-nav" id="custom-function-nav">
          <h3>Function Search</h3>
          <div class="search-container">
            <div class="search-form">
              <input
                type="text"
                id="function-search"
                class="search-input"
                placeholder="Search for functions..."
              />
              <button id="search-button" class="search-button">Search</button>
            </div>
            <div id="search-results" class="search-results"></div>
          </div>
          <div class="custom-functions-list" id="custom-functions-list">
            <div class="empty-state">Search for functions to add them here</div>
          </div>
        </div>

        <div class="tree-nav" id="tree">
          <h3>Function Components</h3>
          <div id="loading-tree" class="loading"></div>
        </div>

        <div class="function-preview" id="function-preview">
          <div class="upper-panel">
            <div class="panel-header" id="panel-header">
              <h3 class="panel-title">Function Details</h3>
              <span class="panel-toggle" id="panel-toggle">â–²</span>
            </div>
            <div class="panel-content">
              <p>Select a function from the tree to view its details.</p>
              <p>You can explore the function structure by:</p>
              <ul>
                <li>Clicking on a function to view its details</li>
                <li>Expanding a function to see its components</li>
                <li>Expanding components to see their segments</li>
                <li>Clicking on segments to view their content</li>
              </ul>
            </div>
          </div>
          <div class="lower-panel" id="lower-panel">
            <p>The complete function code will appear here.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="floating-chat-panel" id="qa-panel">
      <div class="chat-header">
        <h3>Code Repository Q&A</h3>
        <button id="qa-toggle" class="chat-toggle-btn">_</button>
      </div>
      <div class="chat-messages" id="qa-messages">
        <div class="chat-message system">
          <div class="message-content">
            Hello! I can answer questions about this code repository. What would you like to know?
          </div>
          <div class="message-time">Just now</div>
        </div>
      </div>
      <div class="chat-input-container">
        <input type="text" id="qa-input" class="chat-input" placeholder="Ask a question about this repository...">
        <button id="qa-submit" class="chat-submit-btn">Send</button>
      </div>
    </div>
    <script src="/code/static/js/utils.js"></script>
    <script src="/code/static/js/search.js"></script>
    <script src="/code/static/js/qa-panel.js"></script>
    <script src="/code/static/js/func-tree.js"></script>
    <script src="/code/static/js/code-view.js"></script>
    <script src="/code/static/js/tree.js"></script>
  </body>
</html>
